config:
  namespace:
    temporary: true
  runtime:
    resources:
      - ../../UserReportSystem.java
      - ../../GateKeeper.java
      - ../application-test.properties
pre:
  - name: Knative channel setup
    run: oc create -f ../../infra/knative/channels/audit-channel.yaml -n ${YAKS_NAMESPACE}
  - name: Create secret
    run: oc create secret generic example-event-streaming-user-reporting --from-file ../application-test.properties -n ${YAKS_NAMESPACE}
  - name: Kafka setup
    script: ../scripts/installAMQStreams.sh
  - name: Camel-K setup
    run: |
      # move to project home to verify provided kamel-config.yaml
      cd ../..
      kamel install -w -n ${YAKS_NAMESPACE}
